(window["webpackJsonpguodada-react-blog"]=window["webpackJsonpguodada-react-blog"]||[]).push([[2],{695:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),c=a(61);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.b)();Object(n.useEffect)((function(){return t.emit("breadcrumbList",e),function(){t.emit("breadcrumbList",[])}}),[])}},723:function(e,t,a){},740:function(e,t){},750:function(e,t,a){"use strict";a.r(t);a(363);var n=a(297),c=(a(90),a(26)),r=(a(112),a(54)),i=(a(224),a(145)),l=(a(217),a(76)),u=a(23),s=a(0),o=a.n(s),f=a(29),m=(a(723),a(45)),b=a(724),d=a.n(b),g=(a(741),a(40));var p=function(e){return o.a.createElement(d.a,{value:e.value,onChange:e.onChange,options:{autofocus:!0,autosave:!0,previewRender:g.g}})},E=(a(58),a(3)),O=(a(125),a(42)),h=a(127),j=(a(164),a(72)),v=j.a.CheckableTag;var L=function(e){var t=e.list,a=e.setList,n=Object(s.useState)(!1),c=Object(u.a)(n,2),i=c[0],l=c[1],f=Object(s.useState)(""),m=Object(u.a)(f,2),b=m[0],d=m[1],g=e.selectedList,p=e.setSelectedList,L=null;function y(){b&&!t.find((function(e){return e===b}))&&(a([].concat(Object(h.a)(t),[b])),p([].concat(Object(h.a)(g),[b])),d("")),l(!1)}return o.a.createElement(o.a.Fragment,null,t.map((function(e,n){var c=e.length>20,r=o.a.createElement(v,{key:e,closable:"true",onClose:function(){return function(e){var n=t.filter((function(t){return t!==e}));a(n)}(e)},checked:g.includes(e),onChange:function(t){return function(e,t){var a=t?[].concat(Object(h.a)(g),[e]):g.filter((function(t){return t!==e}));p(a)}(e,t)},color:"#1890ff"},c?"".concat(e.slice(0,20),"..."):e);return c?o.a.createElement(O.a,{title:e,key:e},r):r})),o.a.createElement(r.a,{style:{width:78,display:i?"inline":"none"},ref:function(e){L=e},type:"text",size:"small",value:b,onChange:function(e){return d(e.target.value)},onBlur:y,onPressEnter:y}),!i&&o.a.createElement(j.a,{onClick:function(){l(!0),L&&L.focus()},style:{background:"#fff",borderStyle:"dashed"}},o.a.createElement(E.a,{type:"plus"})," New Tag"))},y=a(695);t.default=function(e){var t=Object(f.useSelector)((function(e){return{tagList:e.article.tagList,categoryList:e.article.categoryList,authorId:e.user.userId}})),a=Object(s.useState)(""),b=Object(u.a)(a,2),d=b[0],g=b[1],E=Object(s.useState)(""),O=Object(u.a)(E,2),h=O[0],j=O[1],v=Object(s.useState)([]),S=Object(u.a)(v,2),k=S[0],w=S[1],C=Object(s.useState)([]),N=Object(u.a)(C,2),I=N[0],x=N[1],z=Object(s.useState)([]),J=Object(u.a)(z,2),T=J[0],q=J[1],B=Object(s.useState)([]),F=Object(u.a)(B,2),P=F[0],R=F[1],A=parseInt(e.match.params.id);return Object(y.a)([{link:"/admin/article/manager",name:"\u6587\u7ae0\u7ba1\u7406"},A?"\u7f16\u8f91\u6587\u7ae0":"\u65b0\u589e\u6587\u7ae0"]),Object(s.useEffect)((function(){var e;A&&(e=A,m.a.get("/article/".concat(e,"?type=0")).then((function(e){j(e.title),g(e.content);var t=e.tags.map((function(e){return e.name})),a=e.categories.map((function(e){return e.name}));w(t),x(a),q(t),R(a)})))}),[e.match.params]),Object(s.useEffect)((function(){if(!A){var e=t.tagList.map((function(e){return e.name})).slice(0,10),a=t.categoryList.map((function(e){return e.name})).slice(0,10);w(e),x(a),e[0]&&q([e[0]]),a[0]&&R([a[0]])}}),[t.tagList,t.categoryList]),o.a.createElement("div",{className:"admin-edit-article"},o.a.createElement("ul",{className:"form-list"},o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u9898\uff1a"),o.a.createElement("span",{style:{flex:1}},o.a.createElement(r.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",className:"title-input",name:"title",value:h,onChange:function(e){return j(e.target.value)}}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u7b7e\uff1a"),o.a.createElement("span",null,o.a.createElement(L,{list:k,setList:w,selectedList:T,setSelectedList:q}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u5206\u7c7b\uff1a"),o.a.createElement("span",null,o.a.createElement(L,{list:I,setList:x,selectedList:P,setSelectedList:R})))),o.a.createElement(p,{value:d,onChange:g}),o.a.createElement(c.a,{type:"primary",shape:"circle",size:"large",disabled:!h,className:"action-icon",title:A?"\u66f4\u65b0":"\u65b0\u589e",icon:A?"file-sync":"plus",onClick:function(){A?m.a.put("/article/".concat(A),{title:h,content:d,tags:T,categories:P}).then((function(){l.a.success("\u66f4\u65b0\u6210\u529f")})):function(){if(!h)return l.a.warning("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01");m.a.post("/article",{title:h,content:d,tagList:T,categoryList:P,authorId:t.authorId}).then((function(t){i.a.confirm({title:"\u6587\u7ae0\u521b\u5efa\u6210\u529f\uff01\u662f\u5426\u7acb\u5373\u67e5\u770b\uff1f",onOk:function(){return e.history.push("/article/".concat(t.id))}})}))}()}}),o.a.createElement(n.a,{target:function(){return document.querySelector(".admin-content-wrap")}}))}}}]);